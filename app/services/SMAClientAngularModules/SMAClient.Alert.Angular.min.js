(function(){angular.module("SMAAlert",[]);angular.module("SMAAlert").config(function(){return this}).run(function(){return this}).factory("SMAAlertBaseFactory",["SMAAlertGlobalValues",function(b){function g(a,b,e,c){var d=document.createElement("div");d.id=a+"TitleContainer";d.className="TitleContainerPosition TitleContainer";var g=document.createElement("div");g.id=a+"TitleWrapper";g.className="TitleWrapperPosition TitleWrapper";var m=document.createElement("div");m.id=a+"TitleImageWrapper";m.className=
"TitleImageWrapperPosition TitleImageWrapper";var k=document.createElement("div");k.id=a+"TitleImage";k.className="TitleImagePosition TitleImage";var n=document.createElement("div");n.id=a+"LeftOfImage";n.className="LeftOfImagePosition LeftOfImage";var p=document.createElement("div");p.id=a+"RightOfImage";p.className="RightOfImagePosition RightOfImage";var q=document.createElement("div");q.id=a+"TitleLabelWrapper";q.className="TitleLabelWrapperPosition TitleLabelWrapper";var r=document.createElement("label");
r.id=a+"Title";r.className="TitleLabelPosition TitleLabel";r.innerHTML=b;!1===e&&(m.appendChild(n),m.appendChild(k),m.appendChild(p));!1===c&&(g.appendChild(m),q.appendChild(r));g.appendChild(q);d.appendChild(g);return d}function c(a,c){var e=document.createElement("div");e.id=a+"BodyContainer";e.className="BodyContainerPosition BodyContainer";e.style.maxHeight=window.innerHeight-b.HeaderImageHeight-40-40-40-20;var g=document.createElement("div");g.id=a+"BodyWrapper";g.className="BodyWrapperPosition BodyWrapper";
var d=document.createElement("div");d.id=a+"Body";d.className="BodyPosition Body";d.innerHTML=c;g.appendChild(d);e.appendChild(g);return e}this.CreateHeader=g;this.CreateBody=c;this.CreateFooter=function(a,b){b||(b="Dismiss Message");var c=document.createElement("div");c.id=a+"FooterContainer";c.className="FooterContainerPosition FooterContainer";var g=document.createElement("div");g.id=a+"FooterWrapper";g.className="FooterWrapperPosition FooterWrapper";var d=document.createElement("div");d.id=a+
"FooterButton";d.className="FooterButtonPosition FooterButton";d.innerHTML=b;g.appendChild(d);c.appendChild(g);return c};this.CreateBaseAlert=function(a,b,e,l,d,h){!0!==l&&(l=!1);!0!==d&&(d=!1);!0!==h&&(h=!1);var m=document.createElement("div");m.id=a;m.className="SMAClientAlertContainer";var k=document.createElement("div");k.id=a+"InnerBlock";k.className="AlertPosition Alert";k.style.maxHeight=window.innerHeight-10;k.style.maxWidth=window.innerWidth-10;var n=document.createElement("div");if(!1===
l||!1===d)n=g(a,b,l,d);var p=document.createElement("div");!1===h&&(p=c(a,e));a=document.createElement("div");k.appendChild(n);k.appendChild(p);k.appendChild(a);m.appendChild(k);window.onresize=function(){k.style.maxHeight=window.innerHeight-10;k.style.maxWidth=window.innerWidth-10;p.style.maxHeight=window.innerHeight-n.offsetHeight-60};return m};return this}]).factory("SMAAlertGlobalValues",function(){var b=this;b.CurrentAlertIndex=0;b.BlurAndDarken=!1;b.ActiveAlertsCounter=0;b.ActiveAlerts=[];b.GetAlertIndex=
function(){return b.CurrentAlertIndex++};b.HeaderText="Alert";b.BodyText="";b.FooterText1="YES";b.FooterText2="NO";b.TransitionEvent=function(){var b,c=document.createElement("fakeelement"),a={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",OTransition:"oTransitionEnd"};for(b in a)if(void 0!==c.style[b])return a[b]};b.TransitionName=function(){var b,c=document.createElement("fakeelement"),a={transition:"transition",WebkitTransition:"WebkitTransition",
MozTransition:"MozTransition",MSTransition:"MSTransition",OTransition:"OTransition"};for(b in a)if(void 0!==c.style[b])return a[b]};b.TransformName=function(){var b,c=document.createElement("fakeelement"),a={transform:"transform",WebkitTransform:"WebkitTransform",MozTransform:"MozTransform",MSTransform:"MSTransform",OTransform:"OTransform"};for(b in a)if(void 0!==c.style[b])return a[b]};b.AnimationEvent=function(){var b,c=document.createElement("fakeelement"),a={animation:"animationend",WebkitAnimation:"webkitAnimationEnd",
OAnimation:"oanimationend",MSAnimation:"MSAnimationEnd"};for(b in a)if(void 0!==c.style[b])return a[b];console.error("No Animation event found")};b.HeaderImageHeight=43;b.HeaderImageWidth=183;return b}).factory("SMAAlertDisplay",["SMAAlertGlobalValues",function(b){function g(c){var a=b.ActiveAlerts.indexOf(c);-1<a&&b.ActiveAlerts.splice(a,1);b.TransitionEvent();var f=document.getElementById(c.toString());f.addEventListener(b.AnimationEvent(),function(){f.parentElement.removeChild(f);--b.ActiveAlertsCounter;
if(0===b.ActiveAlertsCounter){var a=document.getElementById("bg");a.parentNode.removeChild(a)}});f.firstChild.classList.add("AnimateOut")}this.ShowAlert=function(c){0===b.ActiveAlertsCounter&&(b.BlurAndDarken=!0);b.ActiveAlertsCounter+=1;b.ActiveAlerts.push(c.id);if(!0===b.BlurAndDarken){var a=document.createElement("div");a.id="bg";a.className="SMAClientAlertContainer SMAClientAlertBlur SMAClientAlertDarken";document.body.appendChild(a);b.BlurAndDarken=!1}c.firstChild.classList.add("AnimateIn");
document.body.appendChild(c)};this.RemoveAlert=g;this.RemoveAllAlerts=function(){for(var c=b.ActiveAlerts.length-1;0<=c;c--)g(b.ActiveAlerts[c])};return this}]).factory("SMAAlertFactory",["SMAAlertBaseFactory","SMAAlertGlobalValues","SMAAlertDisplay",function(b,g,c){this.CreateSpinnerAlert=function(a,f,e){var l="SMAClientAlert"+g.GetAlertIndex();a=b.CreateBaseAlert(l,a||"Loading","");a.firstChild.classList.add("Info");var d=document.createElement("progress");a.firstChild.childNodes[1].firstChild.firstChild.innerHTML=
"";a.firstChild.childNodes[1].firstChild.firstChild.appendChild(d);c.ShowAlert(a);var h={resolve:null,reject:null};(new Promise(function(a,b){h.resolve=a;h.reject=b})).then(function(a){c.RemoveAlert(l);f&&"function"==typeof f&&f(a)},function(a){c.RemoveAlert(l);e&&"function"==typeof e&&e(a)});return h};this.CreateLoadingAlert=function(){};this.CreateLoadingBarAlert=function(){};this.CreateInfoAlert=function(a,f,e,l){var d="SMAClientAlert"+g.GetAlertIndex();a=b.CreateBaseAlert(d,a||"Info",f||""||g.BodyText);
a.firstChild.classList.add("Info");c.ShowAlert(a);var h={resolve:null,reject:null};(new Promise(function(a,b){h.resolve=a;h.reject=b})).then(function(a){c.RemoveAlert(d);e&&"function"==typeof e&&e(a)},function(a){c.RemoveAlert(d);l&&"function"==typeof l&&l(a)});a.firstChild.firstChild.firstChild.firstChild.childNodes[2].onclick=function(){h.resolve()};return h};this.CreateSuccessAlert=function(){};this.CreateErrorAlert=function(){};this.CreateWarningAlert=function(){};this.CreateConfirmAlert=function(a,
f,e,l,d,h){var m="SMAClientAlert"+g.GetAlertIndex();f=f||"Confirm";e=e||"YES";l=l||"NO";var k={resolve:null,reject:null};(new Promise(function(a,b){k.resolve=a;k.reject=b})).then(function(a){c.RemoveAlert(m);d&&"function"==typeof d&&d(a)},function(a){c.RemoveAlert(m);h&&"function"==typeof h&&h(a)});a=b.CreateBaseAlert(m,f,a);a.firstChild.classList.add("Confirm");a.firstChild.removeChild(a.firstChild.childNodes[2]);a.firstChild.appendChild(b.CreateFooter(m));a.firstChild.childNodes[2].firstChild.removeChild(a.firstChild.childNodes[2].firstChild.firstChild);
f=document.createElement("div");f.id=m+"FooterButtonOne";f.className="FooterButtonOnePosition FooterButtonOne";f.textContent=e;f.onclick=function(){k.resolve(!0)};e=document.createElement("div");e.id=m+"FooterButtonTwo";e.className="FooterButtonTwoPosition FooterButtonTwo";e.textContent=l;e.onclick=function(){k.resolve(!1)};a.firstChild.childNodes[2].firstChild.appendChild(f);a.firstChild.childNodes[2].firstChild.appendChild(e);a.firstChild.firstChild.firstChild.firstChild.childNodes[2].onclick=function(){k.resolve("Cancel")};
c.ShowAlert(a);return k};this.CreateConfirmAlertWithCancel=function(){};this.CreateWebPageAlert=function(){};this.CreateCustomAlert=function(a,f,e,l){var d="SMAClientAlert"+g.GetAlertIndex();f=b.CreateBaseAlert(d,f,null);f.firstChild.classList.add("Info");f.firstChild.childNodes[1].firstChild.innerHTML="";a.appendChild?f.firstChild.childNodes[1].firstChild.appendChild(a):f.firstChild.childNodes[1].firstChild.innerHTML=a;c.ShowAlert(f);var h={resolve:null,reject:null};(new Promise(function(a,b){h.resolve=
a;h.reject=b})).then(function(a){c.RemoveAlert(d);e&&"function"==typeof e&&e(a)},function(a){c.RemoveAlert(d);l&&"function"==typeof l&&l(a)});f.firstChild.firstChild.firstChild.firstChild.childNodes[2].onclick=function(){h.resolve()};return h};this.RemoveAllAlerts=function(){return c.RemoveAllAlerts()};return this}])})();
