(function(){angular.module("SMAClient.SQLite",[]);angular.module("SMAClient.SQLite").constant("SMASQLAggressiveWords",["TRUNCATE","DELETE","DROP"]).service("SMASQLInitialization",function(){this.init=function(d){return window.openDatabase?window.openDatabase(d.Name,d.Version,d.Description,d.Size):!1};return this}).service("SMASQLHelpers",["SMASQLAggressiveWords",function(d){function e(b){var a;switch(typeof b){case "string":a="";for(var c=0,f=d.length;c<f;c++)if(-1!==b.toUpperCase().indexOf(d[c]))throw a=
!1,new ReferenceError("Bad input: "+d[c]);a=b.replace("'","''");break;case "object":if(null===b)a=null;else if(b.length)for(a=[],c=0,f=b.length;c<f;c++)a.push(e(b[c]));else a={},Object.keys(b).forEach(function(d){a[d]=e(b[d])});break;case "number":case "boolean":a=b;break;case "undefined":a=null;break;default:throw new ReferenceError("Bad input");}return a}this.SanitizeInput=e;this.OnError=function(b,a){console.error(b);console.error(a)};return this}]).service("SMASQLFunctions",["SMASQLHelpers",function(d){this.Table=
function(){};this.Table.Create=function(e,b,a){b=d.SanitizeInput(b);a=d.SanitizeInput(a);var c="CREATE TABLE IF NOT EXISTS "+b+"("+a.join(", ")+")";return new Promise(function(a,b){e.transaction(function(g){g.executeSql(c,[],function(b){a(b,null)},function(a,c){d.OnError(a,c);b(a,c)})})})};this.Table.Truncate=function(e,b){b=d.SanitizeInput(b);var a="TRUNCATE TABLE IF EXISTS "+b;return new Promise(function(b,f){e.transaction(function(e){e.executeSql(a,[],function(a){b(a,null)},function(a,b){d.OnError(a,
b);f(a,b)})})})};this.Table.Drop=function(e,b){b=d.SanitizeInput(b);var a="DROP TABLE IF EXISTS "+b;return new Promise(function(b,f){e.transaction(function(e){e.executeSql(a,[],function(a){b(a,null)},function(a,b){d.OnError(a,b);f(a,b)})})})};this.Data=function(){};this.Data.Insert=function(e,b,a,c){b=d.SanitizeInput(b);a=d.SanitizeInput(a);c=d.SanitizeInput(c);for(var f=[],h=0,g=c.length;h<g;h++)f.push("?");var k="INSERT INTO "+b+"("+a.join(", ")+") VALUES ("+f.join(", ")+")";return new Promise(function(a,
b){e.transaction(function(f){f.executeSql(k,c,function(b){a(b,null)},function(a,c){d.OnError(a,c);b(a,c)})})})};this.Data.Update=function(e,b,a,c,f){b=d.SanitizeInput(b);a=d.SanitizeInput(a);c=d.SanitizeInput(c);f=d.SanitizeInput(f);for(var h=[],g=0,k=c.length;g<k;g++)h.push("?");f=f&&f.length?" WHERE "+f:"";var l="UPDATE "+b+" SET "+a.join("=? ")+"=?"+f;return new Promise(function(a,b){e.transaction(function(f){f.executeSql(l,c,function(b){a(b,null)},function(a,c){d.OnError(a,c);b(a,c)})})})};this.Data.SelectStar=
function(e,b,a){b=d.SanitizeInput(b);a=(a=d.SanitizeInput(a))&&a.length?" WHERE "+a:"";var c="SELECT * FROM "+b+a;return new Promise(function(a,b){e.transaction(function(e){e.executeSql(c,[],function(b,c){a(b,c)},function(a,c){d.OnError(a,c);b(a,c)})})})};this.Data.SelectColumns=function(e,b,a,c){b=d.SanitizeInput(b);a=d.SanitizeInput(a);c=(c=d.SanitizeInput(c))&&c.length?" WHERE "+c:"";var f="SELECT "+a.join(", ")+" FROM "+b+c;return new Promise(function(a,b){e.transaction(function(c){c.executeSql(f,
[],function(b,c){a(b,c)},function(a,c){d.OnError(a,c);b(a,c)})})})};this.Data.Delete=function(e,b,a){a.tableName=d.SanitizeInput(b);a=(a=d.SanitizeInput(a))&&a.length?" WHERE "+a:"";var c="DELETE FROM "+b+a;return new Promise(function(a,b){e.transaction(function(e){e.executeSql(c,[],function(b){a(b,null)},function(a,c){d.OnError(a,c);b(a,c)})})})};this.Query=function(){};this.Query.CustomRequest=function(e,b,a){b=d.SanitizeInput(b);a=d.SanitizeInput(a);return new Promise(function(c,f){e.transaction(function(e){ts.executeSql(b,
a,function(a,b){c(a,b)},function(a,b){d.OnError(a,b);f(a,b)})})})};return this}])})();
